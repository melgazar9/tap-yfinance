version: 1
send_anonymous_usage_stats: true
project_id: "tap-yfinance"
default_environment: test
environments:
  - name: test
plugins:
  extractors:
    - name: "tap-yfinance"
      namespace: "tap_yfinance"
      pip_url: -e .
      capabilities:
        - state
        - catalog
        - discover
        - about
        - stream-maps
      select:
        - stock_prices_1m
        - stock_prices_1d
        - forex_prices_1m


      config:
        default_start_date: '1950-01-01'
        add_record_metadata: true
        asset_class:
          stocks:
            stock_prices_1m:
              tickers: ["AAPL", "NVDA"]
              yf_params: {'interval': '1m', 'prepost': True, 'repair': True, 'auto_adjust': True, 'back_adjust': False}
            stock_prices_1d:
              tickers: ["AAPL", "NVDA"]
              yf_params: {'interval': '1d', 'prepost': True, 'repair': True, 'auto_adjust': True, 'back_adjust': False}

          forex:
            forex_prices_1m:
              tickers: ["EURUSD=X"]
              yf_params: {'interval': '1m', 'prepost': True, 'repair': True, 'auto_adjust': True, 'back_adjust': False}
            forex_prices_1d:
              tickers: ["EURUSD=X"]
              yf_params: {'interval': '1d', 'prepost': True, 'repair': True, 'auto_adjust': True, 'back_adjust': False}

          crypto:
            crypto_prices_1m:
              tickers: ["BTC-USD", "ETH-USD"]
              yf_params: {'interval': '1m', 'prepost': True, 'repair': True, 'auto_adjust': True, 'back_adjust': False}
            crypto_prices_1d:
              tickers: ["BTC-USD", "ETH-USD"]
              yf_params: {'interval': '1d', 'prepost': True, 'repair': True, 'auto_adjust': True, 'back_adjust': False}

      metadata:
        '*':
          replication-method: INCREMENTAL
          replication-key: replication_key

  loaders:
    - name: target-jsonl
      variant: andyh1203
      pip_url: target-jsonl